<h3 class='headerText'>Order Details</h3>
<hr class='devide'>

<div class='theList' *ngIf='orderDetail$'>
  <ul *ngFor='let driver of orderDetail$.orderGroups'>
    <ul *ngFor='let order of driver.Orders'>
      <div class='justP strong headerText' *ngIf='order.DocumentId == docID'>
        <span>Order Date: {{ order.DocumentDate | date:'dd/MMM/yyyy'}}</span>
        <hr>
        <p id='infoBlock'>Customer Code: {{ order.CustomerCode }}<br>
          Delivery Date: {{ order.DocumentDate | date:'dd/MMM/yyyy' }}<br>
          Packing Slip No: {{ order.PackingSlipNo }}<br>
          Order Id: {{ order.DocumentId }}<br>
          Category1: {{ order.Category1 }}<br>
          Category2: {{ order.Category2 }}</p>

        <button mat-button color='accent' (click)='toggleTable()' class='toggle-panel' *ngIf='show'>Hide Products</button>
        <button mat-button color='warm' (click)='toggleTable()' class='toggle-panel' *ngIf='!show'>View Products</button>
        <table style='width: 100%' [hidden]='hidden'>
          <thead>
            <tr id='infoBlock' class='tableHead'>
              <th>Product</th>
              <th>Qty<br>Ordered</th>
              <th style='text-align: center'>Qty<br>Accepted</th>
              <th style='text-align: center'>Qty<br>Rejected</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor='let delivery of deliveries; index as i' class='tableRow'>
              <td>{{delivery.description}}<br>
                <span>{{delivery.productCode}}</span>
                <span [hidden]=1>{{delivery.lineId}}</span>
                <input type='hidden' *ngIf='delivery.editing' [(ngModel)]='oldDelivery.qtyOrdered' />
              </td>
              <td>{{delivery.qtyOrdered}}
                <br>${{delivery.sellPrice}}
              </td>
              <td style='text-align: center'>{{delivery.qtyOrdered-delivery.qtyRejected}}</td>
              <td><a *ngIf='!delivered && delivery.qtyRejected === 0' routerLink='/rejectproducts/{{docID}},{{delivery.lineId}}'>
                  <button style='width: 100%' color='primary'>{{delivery.qtyRejected}}</button>
                </a>
                <a *ngIf='!delivered && delivery.qtyRejected !== 0' routerLink='/rejectproducts/{{docID}},{{delivery.lineId}}'>
                  <button style='width: 100%; background-color:maroon; font-weight: bold; ' color='primary'>{{delivery.qtyRejected}}</button>
                </a>
                <span *ngIf='delivered' style='width: 100%; background-color:maroon; font-weight: bold; color: white'>
                  {{delivery.qtyRejected}}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
        <br>
        <span style='font-weight: bolder; text-decoration: underline;'>
          Signature</span>
          <div id='signature-pad' class='signature-pad'>
            <signature-pad></signature-pad>
          </div>
        <div style='margin-top: 5px; margin-bottom: 5px;'>
          <button mat-raised-button color='accent' (click)='drawClear()'>Clear</button>
          <button mat-raised-button color='warm' (click)='drawComplete()'>Test Signature</button>
        </div>

        <div *ngIf='!delivered' class='block' style='margin-bottom: 5px; border: 1px solid red;'>
          <mat-form-field style='width: 95%; color: black;'>
            <input type='text' matInput placeholder='Name' [(ngModel)]='oldDelivery.deliveredTo'>
          </mat-form-field>
        </div>
        <div class='block' style='margin-bottom: 5px; font-weight: bold; color: black; padding-left: 5px;' *ngIf='delivered'>
          <span>{{oldDelivery.deliveredTo}}</span>
        </div>
        <div class='block' *ngIf='!delivered' style='margin-bottom: 5px;'>
          <mat-form-field style='width: 95%; color: black;'>
            <mat-select placeholder='Payment' [(ngModel)]='oldDelivery.paymentType'>
              <mat-option *ngFor='let pay of pay' [value]='pay.value'>
                {{pay.viewValue}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class='block' style='margin-bottom: 5px;' *ngIf='delivered'>
          <span>{{oldDelivery.paymentType}}</span>
        </div>
        <div class='block' style='margin-bottom: 5px;' *ngIf='!delivered'>
          <mat-form-field style='width: 95%; color: black;'>
            <input type='number' matInput placeholder='Amount' [(ngModel)]='oldDelivery.paymentAmount'>
            <span *ngIf='delivered'>{{oldDelivery.paymentAmount}}</span>
          </mat-form-field>
        </div>
        <div *ngIf='!delivered' style='margin-bottom: 5px; text-align: center;'>
          <button color='primary' (click)='postData()'>Confirm Order</button>
        </div>
      </div>
    </ul>
  </ul>
</div>
